<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Проверка исправления опечаток</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; background: #f5f5f5; }
        .container { max-width: 800px; margin: 0 auto; background: white; padding: 30px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        h1 { color: #333; border-bottom: 2px solid #4f46e5; padding-bottom: 10px; }
        .code-block { background: #1e1e1e; color: #d4d4d4; padding: 15px; border-radius: 5px; margin: 15px 0; font-family: monospace; }
        .correct { color: #10b981; font-weight: bold; }
        .incorrect { color: #ef4444; font-weight: bold; text-decoration: line-through; }
        .test-result { padding: 15px; margin: 20px 0; border-radius: 8px; }
        .success { background: #d1fae5; border: 2px solid #10b981; }
        .error { background: #fee2e2; border: 2px solid #ef4444; }
        .explanation { background: #f0f9ff; padding: 15px; border-radius: 8px; margin: 15px 0; border-left: 4px solid #3b82f6; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Проверка исправления ошибки с задвоением букв</h1>
        
        <div class="explanation">
            <h3>Проблема:</h3>
            <p>В коде была ошибка: <code>extra.slice(extra)</code> вместо <code>extra.slice(1)</code></p>
            <p>Это приводило к тому, что вместо "сироп" отображалось "ссироп" и т.д.</p>
        </div>
        
        <div class="test-result success">
            <h3>✅ Исправление применено:</h3>
            <div class="code-block">
                <span class="incorrect">// Было (ошибка):<br>extra.charAt(0).toUpperCase() + extra.slice(extra)</span><br><br>
                <span class="correct">// Стало (исправлено):<br>extra.charAt(0).toUpperCase() + extra.slice(1)</span>
            </div>
        </div>
        
        <div class="test-result success">
            <h3>Как работает исправление:</h3>
            <ul>
                <li><code>extra.charAt(0).toUpperCase()</code> - берет первую букву и делает заглавной</li>
                <li><code>extra.slice(1)</code> - берет строку начиная со второй буквы</li>
                <li>Результат: "сироп" → "С" + "ироп" = "Сироп"</li>
            </ul>
        </div>
        
        <div class="test-result success">
            <h3>Тестовые примеры:</h3>
            <table style="width:100%; border-collapse: collapse;">
                <tr style="background:#f3f4f6;">
                    <th style="padding:10px; text-align:left;">Исходное</th>
                    <th style="padding:10px; text-align:left;">Было (ошибка)</th>
                    <th style="padding:10px; text-align:left;">Стало (исправлено)</th>
                </tr>
                <tr>
                    <td style="padding:10px; border-bottom:1px solid #e5e7eb;">"сироп"</td>
                    <td style="padding:10px; border-bottom:1px solid #e5e7eb; color:#ef4444">"Ссироп"</td>
                    <td style="padding:10px; border-bottom:1px solid #e5e7eb; color:#10b981">"Сироп"</td>
                </tr>
                <tr>
                    <td style="padding:10px; border-bottom:1px solid #e5e7eb;">"шоколад"</td>
                    <td style="padding:10px; border-bottom:1px solid #e5e7eb; color:#ef4444">"Шшоколад"</td>
                    <td style="padding:10px; border-bottom:1px solid #e5e7eb; color:#10b981">"Шоколад"</td>
                </tr>
                <tr>
                    <td style="padding:10px; border-bottom:1px solid #e5e7eb;">"корица"</td>
                    <td style="padding:10px; border-bottom:1px solid #e5e7eb; color:#ef4444">"Ккорица"</td>
                    <td style="padding:10px; border-bottom:1px solid #e5e7eb; color:#10b981">"Корица"</td>
                </tr>
            </table>
        </div>
        
        <div class="test-result success">
            <h3>Что делать дальше:</h3>
            <ol>
                <li>Откройте сайт Metodika Coffee</li>
                <li>Нажмите на любой товар</li>
                <li>Откроется модальное окно с дополнениями</li>
                <li>Проверьте названия: должны быть "Сироп", "Шоколад", "Корица" и т.д.</li>
                <li>Если видите "Ссироп", "Шшоколад" - обновите страницу (Ctrl+F5)</li>
            </ol>
        </div>
    </div>
    
    <script>
        // Тестируем исправление
        function testFix() {
            const tests = [
                { input: 'сироп', expected: 'Сироп' },
                { input: 'шоколад', expected: 'Шоколад' },
                { input: 'корица', expected: 'Корица' },
                { input: 'карамель', expected: 'Карамель' },
                { input: 'мята', expected: 'Мята' }
            ];
            
            let allPassed = true;
            const results = [];
            
            tests.forEach(test => {
                // Имитируем исправленный код
                const result = test.input.charAt(0).toUpperCase() + test.input.slice(1);
                const passed = result === test.expected;
                
                if (!passed) allPassed = false;
                
                results.push({
                    input: test.input,
                    result: result,
                    expected: test.expected,
                    passed: passed
                });
            });
            
            // Выводим результаты
            const resultDiv = document.createElement('div');
            resultDiv.className = 'test-result ' + (allPassed ? 'success' : 'error');
            resultDiv.innerHTML = '<h3>' + (allPassed ? '✅ Все тесты пройдены!' : '❌ Есть ошибки') + '</h3>';
            
            results.forEach(r => {
                resultDiv.innerHTML += `<div style="margin:5px 0;">
                    ${r.passed ? '✅' : '❌'} 
                    "${r.input}" → "${r.result}" 
                    ${r.passed ? '' : `(ожидалось: "${r.expected}")`}
                </div>`;
            });
            
            document.querySelector('.container').appendChild(resultDiv);
        }
        
        window.onload = testFix;
    </script>
</body>
</html>
